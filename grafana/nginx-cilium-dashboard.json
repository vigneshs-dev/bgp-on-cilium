{
  "annotations":{
    "list":[]
  },
  "editable":true,
  "gnetId":null,
  "graphTooltip":0,
  "id":null,
  "iteration":1625248617538,
  "links":[],
  "panels":[
    {
      "datasource":null,
      "fieldConfig":{},
      "gridPos":{"h":8,"w":24,"x":0,"y":0},
      "id":1,
      "targets":[
        {
          "expr":"sum(kube_pod_status_ready{namespace=\"cilium-demo\", pod=~\"nginx-demo.*\", condition=\"true\"})",
          "format":"time_series",
          "intervalFactor":1,
          "legendFormat":"ready_pods",
          "refId":"A"
        }
      ],
      "title":"nginx: Ready Pod Count",
      "type":"timeseries"
    },
    {
      "datasource":null,
      "fieldConfig":{},
      "gridPos":{"h":8,"w":24,"x":0,"y":8},
      "id":2,
      "targets":[
        {
          "expr":"sum(increase(kube_pod_container_status_restarts_total{namespace=\"cilium-demo\", pod=~\"nginx-demo.*\"}[5m])) by (pod)",
          "format":"time_series",
          "legendFormat":"{{pod}}",
          "refId":"A"
        }
      ],
      "title":"nginx: Restarts (5m)",
      "type":"timeseries"
    },
    {
      "datasource":null,
      "fieldConfig":{},
      "gridPos":{"h":8,"w":12,"x":0,"y":16},
      "id":3,
      "targets":[
        {
          "expr":"sum(rate(container_cpu_usage_seconds_total{namespace=\"cilium-demo\", pod=~\"nginx-demo.*\"}[5m])) by (pod)",
          "format":"time_series",
          "legendFormat":"{{pod}}",
          "refId":"A"
        }
      ],
      "title":"nginx: CPU (cores)",
      "type":"timeseries"
    },
    {
      "datasource":null,
      "fieldConfig":{},
      "gridPos":{"h":8,"w":12,"x":12,"y":16},
      "id":4,
      "targets":[
        {
          "expr":"sum(container_memory_usage_bytes{namespace=\"cilium-demo\", pod=~\"nginx-demo.*\"}) by (pod) / 1024 / 1024",
          "format":"time_series",
          "legendFormat":"{{pod}}",
          "refId":"A"
        }
      ],
      "title":"nginx: Memory (MiB)",
      "type":"timeseries"
    },
    {
      "datasource":null,
      "fieldConfig":{},
      "gridPos":{"h":8,"w":24,"x":0,"y":24},
      "id":5,
      "targets":[
        {
          "expr":"probe_success{job=\"blackbox-probe-nginx-cilium-demo\"}",
          "format":"time_series",
          "legendFormat":"probe_success",
          "refId":"A"
        }
      ],
      "title":"nginx: HTTP Probe Success (via Blackbox exporter)",
      "type":"timeseries"
    }
  ],
  "refresh":"10s",
  "schemaVersion":27,
  "style":"dark",
  "tags":["cilium","clab","nginx"],
  "templating":{"list":[]},
  "time":{"from":"now-1h","to":"now"},
  "timepicker":{},
  "timezone":"browser",
  "title":"nginx (cilium-demo) - CLAB"
}
